# **読書管理＆ナレッジPWA アプリケーション仕様書 (v1.2)**

## **1\. プロジェクト概要**

* **名称（仮）**: BookKnowledge  
* **目的**: 「本棚を眺める所有欲」と「読書による知識の蓄積」を両立する個人用アプリの開発。  
* **プラットフォーム**: PWA (Progressive Web App) 対応ウェブアプリケーション。  
* **運用形態**: ローカル完結型（サーバーレス）。ユーザー登録不要。データはユーザーのブラウザ内（IndexedDB）に保存される。  
* **デザイン方針**: **モバイルファースト**。PC閲覧時もスマホサイズ（最大幅固定）で中央表示し、没入感を高める。

## **2\. 技術スタック（推奨）**

* **Frontend**: Next.js または React (Vite)  
* **Language**: TypeScript  
* **Styling**: Tailwind CSS  
* **Database**: IndexedDB (ラッパーライブラリとして **Dexie.js** を使用)  
* **API**: Google Books API

## **3\. データモデル設計**

IndexedDBに保存するデータスキーマ定義。

### **3.1 Books (書籍テーブル)**

ユーザーが登録した本の情報を管理するテーブル。

| キー | 型 | 説明 | 備考 |
| :---- | :---- | :---- | :---- |
| id | string | UUID | プライマリキー |
| isbn | string | ISBNコード | 重複確認および検索用 |
| title | string | 書籍タイトル |  |
| authors | string\[\] | 著者名リスト | 配列で保持 |
| thumbnail | string | 表紙画像URL | Google Books APIより取得 |
| status | string | ステータス | 'unread'(未読) / 'reading'(読書中) / 'read'(読了) |
| registeredAt | number | 登録日時 | Unix Timestamp（ソート用） |
| finishedDate | string | 読了日 | YYYY-MM-DD形式。任意（読了時のみ） |

### **3.2 ReviewMemos (感想メモテーブル)**

1冊の本に対し、複数のメモが紐づく (1対多のリレーション)。

| キー | 型 | 説明 | 備考 |
| :---- | :---- | :---- | :---- |
| id | string | UUID | プライマリキー |
| bookId | string | 書籍ID | Booksテーブルへの外部キー |
| page | number | ページ数 | 任意入力 |
| quote | string | **該当文章** | 本文からの引用・コピペ |
| comment | string | **感想メモ** | 自分の考え・考察 |
| tags | string\[\] | タグ | 例: \['\#お金', '\#健康'\] |
| createdAt | number | 作成日時 | Unix Timestamp |

### **3.3 Shelves (カスタム本棚/コレクションテーブル) 【New】**

ユーザーが作成した任意の本棚（リスト）を管理するテーブル。

| キー | 型 | 説明 | 備考 |
| :---- | :---- | :---- | :---- |
| id | string | UUID | プライマリキー |
| title | string | 本棚名 | 例：「2025年ベスト」「積読消化用」 |
| description | string | 説明 | 任意 |
| bookIds | string\[\] | 書籍IDリスト | この本棚に含まれる本のID配列 |
| createdAt | number | 作成日時 | ソート用 |

## **4\. 画面・機能要件**

### **A. ホーム画面 (本棚)**

アプリのメイン画面。

* **UIデザイン**:  
  * **スキューモーフィズム**: 本棚（シェルフ）のデザイン。  
  * **テーマ対応**: 背景デザイン切替機能。  
* **本棚切り替え機能 【New】**:  
  * デフォルトビュー（すべての本）と、カスタム本棚（作成した本棚）をタブやドロワーメニューで切り替え可能にする。  
  * 選択した本棚に含まれる本のみを表示する。  
* **ソート機能**:  
  * 登録順 / タイトル順 / 作者順 / **読了日順**  
* **フィルタ機能**:  
  * **ステータス**: すべて / 読書中 / 読了 / 未読  
  * **読了月**: 読了記録がある「年月」で絞り込み。  
* **アクション**:  
  * 本をタップ → **C. 書籍詳細**へ遷移  
  * 「＋」ボタン → **B. 書籍検索**へ遷移  
  * 「本棚アイコン」 → **G. 本棚管理画面**へ遷移 【New】  
  * 「設定」アイコン → **F. 設定**へ遷移

### **B. 書籍検索・登録画面**

* **検索機能**: Google Books API利用。  
* **登録処理**: 重複チェックを行い、新規登録時は「未読」とする。

### **C. 書籍詳細画面**

* **ヘッダー情報**: 表紙、タイトル、著者名。  
* **画像アクション**: 表紙画像タップで**拡大表示・ダウンロード**。  
* **ステータス管理**: 未読 ⇔ 読書中 ⇔ 読了（カレンダーで読了日入力）。  
* **本棚への追加アクション 【New】**:  
  * 「本棚に追加」メニューを設け、作成済みのカスタム本棚へこの本を追加（または解除）できるモーダルを表示する。  
* **感想メモリスト**: ReviewMemos を表示。  
* **アクション**: 「メモ追加」ボタン（FAB）。

### **D. メモ入力モーダル**

* **入力項目**: ページ数、該当文章(引用)、感想メモ、タグ。  
* **機能**: タグサジェスト。

### **E. タグ横断ビュー (ナレッジベース)**

* **機能**: タグごとのメモ一覧表示（本の表紙・タイトル付き）。

### **F. 設定・データ管理画面**

* **テーマ設定**: 背景デザイン変更（ダークウッド/ライトウッド等）。  
* **データ管理**: JSONエクスポート/インポート/全削除。

### **G. 本棚管理・作成画面 【New】**

カスタム本棚を作成・編集する機能。

* **本棚一覧モード**:  
  * 作成済みの本棚リストを表示。  
  * アクション: 新規作成、編集、削除。  
* **本棚作成/編集モード**:  
  1. **基本情報**: 本棚名（必須）、説明（任意）を入力。  
  2. **本を選択**:  
     * アプリに登録済みの「全書籍」をリスト表示。  
     * **絞り込み機能**: ステータスや読了月、キーワードでリストをフィルタリングし、目当ての本を探しやすくする。  
     * **選択**: チェックボックス等で、本棚に入れたい本を選択する（複数選択可）。  
  3. **保存**: Shelves テーブルに保存。

## **5\. UI/UX ガイドライン**

* **モバイルファースト**: スマホサイズを基準とし、PCでは中央寄せレイアウトを採用。  
* **世界観**: 「愛着のある書斎」を感じさせるデザイン。  
* **操作性**: 本棚への追加操作などは、Spotifyの「プレイリストに追加」のような手軽さを目指す。